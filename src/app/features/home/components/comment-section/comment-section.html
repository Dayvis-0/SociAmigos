<div class="comments-section">
  <!-- BotÃ³n para mostrar comentarios existentes -->
  <button class="view-comments-btn" (click)="toggleComments()">
    {{ showComments ? 'Ocultar comentarios' : 'Ver los ' + commentsCount + ' comentarios' }}
  </button>
  
  <!-- Contenedor de comentarios -->
  <div class="comments-container" [class.show]="showComments" *ngIf="showComments">
    <!-- Comentarios -->
    <div *ngFor="let comment of comments" class="comment-item">
      <div class="comment-avatar">{{ comment.author.substring(0, 2).toUpperCase() }}</div>
      <div class="comment-content">
        <div class="comment-bubble">
          <span class="comment-author">{{ comment.author }}</span>
          <p class="comment-text">{{ comment.text }}</p>
        </div>
        <div class="comment-actions">
          <button 
            class="comment-like-btn"
            [class.liked]="comment.liked"
            (click)="toggleLike(comment)"
          >
            Me gusta
          </button>
          <button class="comment-reply-btn" (click)="onReply(comment)">
            Responder
          </button>
          <span class="comment-time">{{ comment.time }}</span>
          <span *ngIf="comment.likes > 0" class="comment-likes">
            {{ comment.likes }} Me gusta
          </span>
        </div>
        
        <!-- Respuestas al comentario -->
        <div *ngIf="comment.replies && comment.replies.length > 0" class="comment-replies">
          <div *ngFor="let reply of comment.replies" class="comment-item reply">
            <div class="comment-avatar">{{ reply.author.substring(0, 2).toUpperCase() }}</div>
            <div class="comment-content">
              <div class="comment-bubble">
                <span class="comment-author">{{ reply.author }}</span>
                <p class="comment-text">{{ reply.text }}</p>
              </div>
              <div class="comment-actions">
                <button 
                  class="comment-like-btn"
                  [class.liked]="reply.liked"
                  (click)="toggleLike(reply)"
                >
                  Me gusta
                </button>
                <button class="comment-reply-btn" (click)="onReply(reply)">
                  Responder
                </button>
                <span class="comment-time">{{ reply.time }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Formulario para agregar comentario -->
  <div class="add-comment-form">
    <div class="comment-avatar">TÃš</div>
    <div class="comment-input-wrapper">
      <input 
        type="text" 
        class="comment-input" 
        placeholder="Escribe un comentario..."
        [(ngModel)]="newCommentText"
        (keypress)="onKeyPress($event)"
      >
      <div class="comment-input-actions">
        <button class="emoji-btn" title="Emoji" (click)="onEmojiClick()">ðŸ˜Š</button>
        <button class="attach-btn" title="Adjuntar" (click)="onAttachClick()">ðŸ“Ž</button>
        <button class="gif-btn" title="GIF" (click)="onGifClick()">GIF</button>
        <button class="sticker-btn" title="Sticker" (click)="onStickerClick()">ðŸŽ¨</button>
      </div>
    </div>
  </div>
</div>